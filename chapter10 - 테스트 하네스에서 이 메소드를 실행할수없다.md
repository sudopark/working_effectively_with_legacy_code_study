### 메소드를 테스트하기 힘든점

1. 접근제한자에 걸려있다
2. 호출에 필요한 매개변수 생성이 어렵다.
3. 메소드 호출이 내는 사이드이펙트가 부담스럽다.
4. 메소드가 사용하는 객체들을 사전에 감지해야하는경우



#### 1. 접근제한자로 막혀있는경우

: 보통 할필요없다 -> public한 인터페이스로 실제 동작과 동일하게 테스트

하지만 메소드내 내부 루틴을 테스트하고자하는 경우가 있다. => 해결책은 그래야한다면(테스트를 추가하고싶다면) 이를 public으로 만들어야한다. 이게 싫다면 해당 메소드가 이미 너무 많은역할을 지니고 있다는것

분리한다면?

- 신경쓰지 않아도될 메소드가 추가되거나
- 이게 외부에서 호출되면 사이드이펙이남 => 이 로직을 신규 클래스로 옮겨라



#### 2. 매개변수 생성이 힘든경우

- 매개변수 적합기법을 이용 -> 매개변수의 슈퍼클래스의 서브클래스로 파라미터 전달
- 인터페이스 추출

-> 단 이로인해 타입캨스팅이 계속 되어야하는 오버헤드가 발생, 우짤수없음

=> 메개변수의 생성이 어려운경우(final 생성자 없음 등) 이는 설계의 문제가 아니라 **이를 직접 의존하고있는 개발자의 문제다**



#### 3. 사이드이펙트가 부담스러운 경우, or 리턴값이 없는경우

: 역할을 분리하고 이것들을 테스트해라잉

명령과 쿼리를 분리해라

- 명령 -> 반환값이 없지만 상태를 변경하는것
- 쿼리 -> 반환값이 있지만 상태를 변경하지 않는것

=> 이 규칙을 통하여 객체간 의사소통이 수월해짐
